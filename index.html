<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∫∫Âëò‰ø°ÊÅØÊü•ËØ¢Á≥ªÁªü</title>
    <link rel="stylesheet" href="//unpkg.com/element-plus/dist/index.css">
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë•</text></svg>">
</head>
<body>
    <div id="app">
        <!-- ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ -->
        <div class="theme-switch">
            <el-button @click="toggleTheme" :title="isDark ? 'ÂàáÊç¢Âà∞‰∫ÆËâ≤Ê®°Âºè' : 'ÂàáÊç¢Âà∞Ê∑±Ëâ≤Ê®°Âºè'">
                <template v-if="isDark">üåû</template>
                <template v-else>üåô</template>
            </el-button>
        </div>

        <div class="container">
            <h1>‰∫∫Âëò‰ø°ÊÅØÊü•ËØ¢Á≥ªÁªü</h1>
            
            <!-- ÊêúÁ¥¢Á≠õÈÄâÂå∫Âüü -->
            <div class="search-area">
                <el-form :inline="true" class="filter-form">
                    <el-form-item label="ÂßìÂêçÊêúÁ¥¢">
                        <el-input v-model="searchName" placeholder="ËØ∑ËæìÂÖ•ÂßìÂêç" clearable>
                            <template #prefix>
                                <el-icon><search /></el-icon>
                            </template>
                        </el-input>
                    </el-form-item>
                    <el-form-item label="ÊÄßÂà´">
                        <el-select v-model="selectedGender" placeholder="ËØ∑ÈÄâÊã©ÊÄßÂà´" clearable>
                            <el-option label="Áî∑" value="Áî∑"></el-option>
                            <el-option label="Â•≥" value="Â•≥"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="Âπ¥ÈæÑ">
                        <el-select v-model="selectedYear" placeholder="ËØ∑ÈÄâÊã©Âπ¥ÈæÑ" clearable>
                            <el-option v-for="age in birthYears" 
                                     :key="age" 
                                     :label="age" 
                                     :value="age">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="ÁúÅ‰ªΩ">
                        <el-select v-model="selectedProvince" placeholder="ËØ∑ÈÄâÊã©ÁúÅ‰ªΩ" clearable>
                            <el-option v-for="province in provinces" 
                                     :key="province" 
                                     :label="province" 
                                     :value="province">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item>
                        <el-button type="primary" @click="resetFilters">
                            ÈáçÁΩÆÁ≠õÈÄâ
                        </el-button>
                    </el-form-item>
                </el-form>
            </div>

            <!-- Êï∞ÊçÆÂ±ïÁ§∫Âå∫Âüü -->
            <div class="data-area">
                <el-table 
                    :data="filteredPeople" 
                    style="width: 100%" 
                    height="600" 
                    stripe
                    v-loading="loading"
                    element-loading-text="Âä†ËΩΩ‰∏≠..."
                    element-loading-background="rgba(255, 255, 255, 0.8)">
                    <el-table-column prop="name" label="ÂßìÂêç" width="120">
                        <template #default="scope">
                            <el-button 
                                link 
                                type="primary" 
                                @click="showDetailDialog(scope.row)"
                                class="name-link">
                                {{ scope.row.name }}
                            </el-button>
                        </template>
                    </el-table-column>
                    <el-table-column prop="gender" label="ÊÄßÂà´" width="80">
                        <template #default="scope">
                            <span :class="['status-tag', scope.row.gender === 'Êú™Áü•' ? 'status-unknown' : 'status-mainland']">
                                {{ scope.row.gender }}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="age" label="Âπ¥ÈæÑ" width="100">
                        <template #default="scope">
                            <span :class="['status-tag', scope.row.age === 'Êú™Áü•' ? 'status-unknown' : 'status-mainland']">
                                {{ scope.row.age }}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="province" label="ÁúÅ‰ªΩ" width="120">
                        <template #default="scope">
                            <span :class="['status-tag', 
                                scope.row.province === 'Êú™Áü•' ? 'status-unknown' : 
                                scope.row.province === 'ÈùûÂ§ßÈôÜÂú∞Âå∫' ? 'status-foreign' : 'status-mainland']">
                                {{ scope.row.province }}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="idCardDisplay" label="Ë∫´‰ªΩËØÅÂè∑Á†Å">
                        <template #default="scope">
                            <el-tooltip :content="scope.row.idCardDisplay" placement="top" :show-after="1000">
                                <span>{{ scope.row.idCardDisplay }}</span>
                            </el-tooltip>
                        </template>
                    </el-table-column>
                </el-table>
            </div>

            <!-- ÂàÜÈ°µÂå∫Âüü -->
            <div class="pagination-area">
                <el-pagination
                    v-model:current-page="currentPage"
                    v-model:page-size="pageSize"
                    :page-sizes="[20, 50, 100, 200]"
                    layout="total, sizes, prev, pager, next"
                    :total="totalCount"
                    @size-change="handleSizeChange"
                    @current-change="handleCurrentChange">
                </el-pagination>
            </div>
        </div>
    </div>

    <script src="//unpkg.com/vue@3"></script>
    <script src="//unpkg.com/element-plus"></script>
    <script src="src/js/app.js"></script>
</body>
</html> 